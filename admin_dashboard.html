<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Ticket Management</title>
    <link rel="stylesheet" href="admin_dash.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>Admin Dashboard - Ticket Management</h1>
            <p>Manage and resolve transport-related issues efficiently.</p>
        </div>
    </header>

    <!-- Ticket Management Panel -->
    <section class="admin-panel">
        <div class="container">
            <h2>Manage Tickets</h2>

            <!-- Filter Options -->
            <div class="filters">
                <label for="filterType">Filter by Transport Type:</label>
                <select id="filterType">
                    <option value="all">All</option>
                    <option value="bus">Bus</option>
                    <option value="train">Train</option>
                </select>

                <label for="filterStatus">Filter by Status:</label>
                <select id="filterStatus">
                    <option value="all">All</option>
                    <option value="pending">Pending</option>
                    <option value="inProgress">In Progress</option>
                    <option value="resolved">Resolved</option>
                </select>
            </div>

            <!-- Ticket List Table -->
            <table class="ticket-table">
                <thead>
                    <tr>
                        <th>Ticket ID</th>
                        <th>Transport Type</th>
                        <th>Issue Type</th>
                        <th>Description</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="ticketList">
                    <!-- Dynamic Ticket Entries Here -->
                </tbody>
            </table>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Admin Ticket Management. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- JavaScript for Ticket Management -->
    <script>
        // Sample ticket data
        const tickets = [
            { id: 1, type: "bus", issue: "Delay", description: "Bus was late by 45 minutes", status: "pending" },
            { id: 2, type: "train", issue: "Lost Item", description: "Lost bag in the train", status: "inProgress" },
            { id: 3, type: "bus", issue: "Overcrowding", description: "Too many passengers", status: "resolved" },
        ];

        const ticketList = document.getElementById("ticketList");

        function loadTickets() {
            ticketList.innerHTML = "";
            tickets.forEach(ticket => {
                const row = `<tr>
                    <td>${ticket.id}</td>
                    <td>${ticket.type}</td>
                    <td>${ticket.issue}</td>
                    <td>${ticket.description}</td>
                    <td>
                        <select class="status-dropdown" data-id="${ticket.id}">
                            <option value="pending" ${ticket.status === "pending" ? "selected" : ""}>Pending</option>
                            <option value="inProgress" ${ticket.status === "inProgress" ? "selected" : ""}>In Progress</option>
                            <option value="resolved" ${ticket.status === "resolved" ? "selected" : ""}>Resolved</option>
                        </select>
                    </td>
                    <td>
                        <button class="delete-btn" data-id="${ticket.id}"><i class="fa fa-trash"></i> Delete</button>
                    </td>
                </tr>`;
                ticketList.innerHTML += row;
            });

            // Add event listeners to update status
            document.querySelectorAll(".status-dropdown").forEach(select => {
                select.addEventListener("change", updateStatus);
            });

            // Add event listeners to delete ticket
            document.querySelectorAll(".delete-btn").forEach(button => {
                button.addEventListener("click", deleteTicket);
            });
        }

        function updateStatus(event) {
            const ticketId = event.target.dataset.id;
            const newStatus = event.target.value;
            const ticket = tickets.find(t => t.id == ticketId);
            if (ticket) ticket.status = newStatus;
            loadTickets();
        }

        function deleteTicket(event) {
            const ticketId = event.target.dataset.id;
            const index = tickets.findIndex(t => t.id == ticketId);
            if (index !== -1) {
                tickets.splice(index, 1);
                loadTickets();
            }
        }

        // Load tickets on page load
        loadTickets();
    </script>

</body>
</html>
